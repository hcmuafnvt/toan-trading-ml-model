ğŸ¯ Stage 3 â€” Label Engineering & Feature Stack
(Ä‘Ã¢y lÃ  pháº§n â€œlinh há»“nâ€ cá»§a pipeline, nÆ¡i ta táº¡o target labels vÃ  chuáº©n bá»‹ feature-set cho mÃ´ hÃ¬nh há»c Ä‘Æ°á»£c)

â¸»

ğŸ§­ Má»¥c tiÃªu chung

XÃ¢y dá»±ng pipeline gÃ¡n nhÃ£n + feature stack chuyÃªn nghiá»‡p, lÃ m Ä‘áº§u vÃ o huáº¥n luyá»‡n cho ML (LightGBM, XGBoost, v.v.).
ToÃ n bá»™ dá»¯ liá»‡u Stage 3 Ä‘á»u dá»±a trÃªn baseline Ä‘Ã£ freeze á»Ÿ Stage 2.

â¸»

ğŸ§± Roadmap chi tiáº¿t Stage 3

MÃ£ stage
TÃªn
Má»¥c Ä‘Ã­ch chÃ­nh
Output file
3.1
Label Definition & Generation
Táº¡o nhÃ£n (targets) dá»±a trÃªn biáº¿n Ä‘á»™ng giÃ¡ tÆ°Æ¡ng lai, TP/SL áº£o, hoáº·c momentum.
data/stage3_labels.parquet
3.2
Label QA & Integrity Check
Kiá»ƒm tra nhÃ£n: phÃ¢n phá»‘i, tá»· lá»‡, leak, Ä‘á»™ cÃ¢n báº±ng.
logs/stage3_label_audit.txt
3.3
Feature Alignment & Stack
Káº¿t há»£p features Stage 2 + labels â†’ frame train/test.
data/stage3_feature_stack.parquet
3.4
Feature Sanitization & Reduction
Chuáº©n hoÃ¡, lá»c, loáº¡i feature noise; Ã¡p chuáº©n tsfresh & LightGBM.
data/stage3_features_sanitized.parquet
3.5
Train/Valid/Test Split & Export
Táº¡o splits chuáº©n (rolling window, WF), xuáº¥t chuáº©n cho Stage 4.
data/stage3_dataset_ready.parquet + metadata JSON


ğŸ§© NguyÃªn táº¯c thiáº¿t káº¿
1.	No Leakage: nhÃ£n pháº£i dÃ¹ng future price nhÆ°ng khÃ´ng áº£nh hÆ°á»Ÿng hiá»‡n táº¡i.
2.	Consistent TimeIndex: toÃ n bá»™ UTC M5 (= 296 996 rows).
3.	Multi-Pair Support: nhÃ£n máº·c Ä‘á»‹nh tÃ­nh trÃªn gbpusd_close, sau Ä‘Ã³ má»Ÿ rá»™ng cÃ¡c pair.
4.	Explainability First: má»—i label sáº½ cÃ³ cáº£ dáº¡ng raw, binary, ternary vÃ  regression.
5.	Stage-by-Stage Freeze: sau má»—i sub-stage QA xong má»›i Ä‘Æ°á»£c chuyá»ƒn bÆ°á»›c tiáº¿p theo.

